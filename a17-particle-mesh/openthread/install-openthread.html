<body bgcolor="">
  
 <script>
function mySelectAll(myThis){
   myThis.select();
   document.execCommand('Copy');
}
</script> 
  
  
  
  

<h1 align=center>Installing OpenThread on a Linux Computer (I used Ubuntu version 18.04)....</h1>
  <h1>Draft, Draft, Draft, Draft, Draft, Draft, Draft, Draft,  Did I mention this is only a draft :)</h1>  
  
  <font color=red><b> On this site, single click black boxes to copy. Then on the Linux command line, 
    right-click-paste (the Linux command line does not use  ctrl-v to paste) </b></font><br>
  
  
  Checkout the github  at <a href="https://github.com/hpssjellis/particle.io-photon-high-school-robotics/edit/master/a17-particle-mesh/openthread/">https://github.com/hpssjellis/particle.io-photon-high-school-robotics/edit/master/a17-particle-mesh/openthread/</a>  
<br>

  
  You can do most of the steps below automatically by downloading (right-click and save-link-as) <a href="https://github.com/hpssjellis/particle.io-photon-high-school-robotics/blob/master/a17-particle-mesh/openthread/openthread-install-all.sh">openthread-install-all.sh</a> <br><br>  
  
You must do this command before it will run: <br>
    
<li><textarea  style="background-color:black; color:yellow;  width:90%;  " rows=1 readonly onfocus="{mySelectAll(this)}">
sudo chmod a+x  openthread-install-all.sh</textarea><br>
  
  
 Then run it with this 
    
<li><textarea  style="background-color:black; color:yellow;  width:90%;  " rows=1 readonly onfocus="{mySelectAll(this)}">
./openthread-install-all.sh</textarea><br><br><br>
  

  
  
  THE MANUAL STEPS BELOW IN <font style="background-color:green; color:yellow"> GREEN</font> ARE DONE AUTOMATICALLY BY THE ABOVE INSTALLATION BASH COMMAND. <br>
  THE STEPS IN <font style="background-color:blue; color:yellow"> BLUE </font> YOU MUST DO YOURSELF IF YOU USE THE ABOVE INSTALLATION BASH COMMAND. <br>
  
<hr><br>
<tr><td><h1>These steps assume you have a pre-programmed nrf52840dongle. If you don't you must do the Openthread step first.</h1></td></tr>  
  
Note: When reading this on a mobile device sometimes the text in the black boxes does not fully show up. Best to read on a Linux machine.  
<table border=1>
  
  <tr><td><h1>Step 1. Might as well install all 4 github repositories</h1></td></tr>  
  
<tr><td style="background-color:green; ">  
  
  

(If you know how to do things in other ways, such as making new directories then do what you know)<br>
<ol>
  
<li><textarea  style="background-color:black; color:yellow; width:90%; " rows=1 readonly onfocus="{mySelectAll(this)}">
cd ~</textarea><br>
  
  
<li><textarea  style="background-color:black; color:yellow; width:90%;  "  rows=1  readonly onfocus="{mySelectAll(this)}">
mkdir openthread-all</textarea><br>
  
<li><textarea  style="background-color:black; color:yellow; width:90%;"  rows=1  readonly onfocus="{mySelectAll(this)}">
cd ~/openthread-all</textarea><br>  
     
<h2>// Download the 4 openthread repositories</h2>  
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git clone https://github.com/openthread/wpantund.git</textarea><br>
    
  
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git clone https://github.com/openthread/borderrouter.git</textarea><br>
  
  
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git clone https://github.com/openthread/openthread.git</textarea><br>

 
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git clone https://github.com/openthread/pyspinel.git</textarea><br>
     
  
</td></tr>   
  
  
  
  
  
  
  
  
  
  
  
  
<tr><td><h1>Step 2. Install Wpantund</h1></td></tr>  
<tr><td style="background-color:green; ">    
  
  
<h2>// Let's install wpantund first. It controls what items can join the thread network</h2>
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
cd ~/openthread-all/wpantund</textarea><br>
     
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git checkout full/latest-release</textarea><br>
     
  
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo apt-get update</textarea><br>
   
  
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo apt-get install dbus libreadline</textarea><br>
     
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo apt-get install gcc g++ libdbus-1-dev libboost-dev libreadline-dev</textarea><br>
     
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git checkout full/latest-release</textarea><br>
     
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo apt-get install libtool autoconf autoconf-archive</textarea><br>
     

 
  
  
  
     
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
./bootstrap.sh </textarea><br>
   
     
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
./configure --sysconfdir=/etc</textarea><br>
   
     
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
make</textarea><br>
   
     
This install it on your computer           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo make install</textarea><br>
 
  
  </td></tr>
  <tr><td></td></tr>  
  <tr><td style="background-color:blue; ">  
  
  
  

  
  
  
  
  
  <b>Now start wpantund assuming /dev/ttyACM0  might also be /dev/ttyUSB0  or ACM1  or ACM2</b><br>
  
You might have to try differenty usb ports for your nrf52840 USB Dongle
  
  
     
 Start the background daemon<br>          
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo /usr/local/sbin/wpantund -o NCPSocketName /dev/ttyACM0 -o WPANInterfaceName wpan0</textarea><br>
   
   
Now start wpanctl to control wpantund using the wpan0 name above if you have a different nrf52840 
  you can setup another wpantund and ctl using ttyACM1 and wpan1 
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo /usr/local/bin/wpanctl -I wpan0</textarea><br>
   
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
help</textarea><br>
  
    
 // plug in other nrf52840's if you have them<br>          
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
scan</textarea><br>
    
  
   use your networkmaster key instead of:  000102030405060708090a0b0c0d0e0f<br>
  The command is <br>
   setprop NetworkKey --data 000102030405060708090a0b0c0d0e0f        
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
setprop NetworkKey --data </textarea><br>
   

   
   
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
form "MyCoolNetwork" -c 11</textarea><br>
   
   
// allow joining this network for 1 hour = 3600 seconds<br>           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
permit-join 3600 11</textarea><br>
   
      
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
status</textarea><br>
   
   
 
   
     
Have a look at all the properties           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
getprop -a</textarea><br>
   

     
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
   
   
   
</td></tr>

  
  
  
  
  
  
  
  
  
  
  
  <tr><td><h1>Step 3. Install the Border Router to auto-load</h1></td></tr>   
  
<tr><td style="background-color:green; ">   

  <h2>// Lets install the Border Router. It controls the Thread connection with the internet.
    Note: This program automatically starts after being rebooted.</h2>   
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
cd ~/openthread-all/borderrouter</textarea><br>
     
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git checkout full/latest-release</textarea><br>
        
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
./script/bootstrap</textarea><br>
   
      
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
./script/setup</textarea><br>
  
    </td></tr>
    <tr><td style="background-color:blue; ">  
  
  
 // plug in your nrf52840 usb dongle<br>            
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
ls /dev/tty*</textarea><br>
           
 
  --or--
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
ls /dev/ttyA*</textarea><br>
   

//Edit wpantund.conf  ......    should be in /etc/wpantund.conf     <br>      
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
find -iname wpantund.conf   </textarea><br>
   

           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo nano /etc/wpantund.conf</textarea><br>
   
<br> Edit<br>

  
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
Config:NCP:SocketPath "/dev/ttyACM0"</textarea><br>
  
  ^x to exit nano
   
Reboot the computer.
  
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo systemctl status avahi-daemon.service</textarea><br>
   
           
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo systemctl status otbr-agent.service</textarea><br>
   
            
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo systemctl status otbr-web.service</textarea><br>
              
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo systemctl status wpantund.service</textarea><br>
              
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo systemctl status ????? I think therre is a nat64  status as well</textarea><br>
   
  
  
  <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
   
    <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
   
      <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
   
        <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
   
</td></tr> 

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <tr><td><h1>Step 4. Install Openthread to program your nrf52840 device</h1></td></tr>    
<tr><td style="background-color:green; ">  
          
          
          
          <h2>// Let's install openthread for programming the nrf52840 USB Dongles</h2>

<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
cd ~/openthread-all/openthread</textarea><br>
            
  
   <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
git checkout full/latest-release</textarea><br>
     
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
sudo apt-get update</textarea><br>
            
  <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
./script/bootstrap</textarea><br>
            
  <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
./bootstrap</textarea><br>
            
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
make -f examples/Makefile-nrf52840 clean</textarea><br>
             
 As afr as I can tell this is every command option possible. You might want to ony try a few of them            
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
make -f examples/Makefile-nrf52840 USB=1 BOOTLOADER=1 BORDER_AGENT=1 BORDER_ROUTER=1 COMMISSIONER=1 JOINER=1 UDP_PROXY=1 CFLAGS+=-UCONFIG_GPIO_AS_PINRESET</textarea><br>
  
This converts the ncp to a hex file             
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
arm-none-eabi-objcopy output/nrf52840/bin/ot-ncp-ftd -O ihex output/nrf52840/bin/ncp_app.hex</textarea><br>
  
  
This converts the cli to a hex file.               
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
arm-none-eabi-objcopy output/nrf52840/bin/ot-cli-ftd -O ihex output/nrf52840/bin/ot-cli-ftd.hex</textarea><br>
  
               
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
  
  
               
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
  
  
              </td></tr> 
    <tr><td style="background-color:blue; ">  
  
  
             
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
  
  
             
<li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
  
   <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
            
  <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
            
  <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
            
  <li><textarea  style="background-color:black; color:yellow; width:90%; "  rows=1  readonly onfocus="{mySelectAll(this)}">
</textarea><br>
             
  
</td></tr>
  
  
  
  
  
  
  <tr><td><h1>Step 5. Install pySpinel?</h1></td></tr>                        
<tr><td style="background-color:Green; ">       
          
<h2>// Let's never install pyspinel: Just kidding I just havn't done it yet. I think it does what wpantund does just using Python.</h2>

         
</td></tr>
</table>
         

          
  
  </body>




